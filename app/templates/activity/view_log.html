{% extends "base.html" %}
{% block content %}
    <div class="row">
        <div class="col-md-8 mx-auto">
            <h1 class="h3 mb-3 font-weight-normal">Exercises this week</h1>
            <canvas id="myChart"></canvas>
            <script>
                Chart.defaults.scale.gridLines.drawOnChartArea = false;

                var ctx = document.getElementById('myChart');
                var myChart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'],
                        datasets: {{ chart_data|safe }}
                    },
                    options: {
                        title: {
                            display: true,
                            text: 'This week: minutes spent exercising'
                        },
                        tooltips: {
                            mode: 'index',
                            intersect: false
                        },
                        responsive: true,
                        scales: {
                            xAxes: [{
                                stacked: true,
                            }],
                            yAxes: [{
                                stacked: true,
                                ticks: {
                                    beginAtZero: true
                                }
                            }]
                        }
                    }
                });

            </script>

        </div>
    </div>
    <div class="row">
        <div class="col-md-8 mx-auto">
            <h1 class="h3 mb-3 font-weight-normal">My logged exercises</h1>
            {% if activities %}
                <div class="table-responsive">
                <table id="activity_list" class="table table-hover table-responsive">
                    <caption>Exercise Log</caption>
                    <thead class="">
                    <tr>
                        <th scope="col" class="th-sm">Type</th>
                        <th scope="col" class="th-sm">Date</th>
                        <th scope="col" class="th-lg">Title</th>
                        <th scope="col" class="th-sm">Duration</th>
                        <th scope="col" class="th-sm">Distance</th>
                        <th scope="col" class="th-sm"></th>
                    </tr>
                    </thead>
                    {% for activity in activities %}
                        <tr>
                         <td><i class="{{ icons[activity.type] }}"></i></td>

                            <td>{{ moment(activity.timestamp).format('MMM D, h:mm') }}</td>
                           <td>{{ activity.title }}</td>
                            <td>{{ activity.duration }}</td>
                            <td>{% if activity.distance %}
                                {{ activity.distance | round(2) }}
                            {% endif %}
                            </td>
                            <td><a id="delete_activity_link"
                                   href="{{ url_for('main.delete_activity',activity_id=activity.id) }}"><i
                                    class="fas fa-trash" aria-hidden="true"></i>&nbsp;</a></td>
                        </tr>
                    {% endfor %}
                </table>
            {% endif %}
            </div>
        </div>
    </div>
{% endblock %}